<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Настройки — Admin</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  :root{--bg:#07080a;--surface:#0d0f14;--surface2:#131720;--border:#1c2230;--border2:#252d3d;--text:#e2e8f5;--muted:#5a6580;--muted2:#7a8aa8;--accent:#3b7aff;--accent2:#5c94ff;--green:#22d87a;--red:#ff4e6a;--yellow:#ffb83a;--font:'Syne',sans-serif;--mono:'JetBrains Mono',monospace;--sidebar:220px;--radius:14px;--radius-sm:8px;}
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:var(--font);background:var(--bg);color:var(--text);display:flex;min-height:100vh;}
  .sidebar{width:var(--sidebar);min-height:100vh;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;padding:24px 0;position:fixed;left:0;top:0;bottom:0;z-index:100;}
  .logo{padding:0 20px 24px;border-bottom:1px solid var(--border);margin-bottom:16px;}
  .logo-name{font-size:17px;font-weight:800;letter-spacing:-0.5px;color:var(--text);line-height:1;}
  .logo-name span{color:var(--accent2);}
  .logo-sub{font-size:11px;color:var(--muted);margin-top:4px;font-family:var(--mono);text-transform:uppercase;letter-spacing:1px;}
  .nav{flex:1;padding:0 12px;display:flex;flex-direction:column;gap:2px;}
  .nav-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:var(--radius-sm);color:var(--muted2);text-decoration:none;font-size:14px;font-weight:600;transition:all .15s;position:relative;}
  .nav-item:hover{background:var(--surface2);color:var(--text);}
  .nav-item.active{background:rgba(59,122,255,.12);color:var(--accent2);}
  .nav-item.active::before{content:'';position:absolute;left:0;top:20%;bottom:20%;width:3px;background:var(--accent);border-radius:0 3px 3px 0;}
  .nav-icon{font-size:16px;width:20px;text-align:center;}
  .sidebar-footer{padding:16px 12px 0;border-top:1px solid var(--border);}
  .admin-label{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--muted);padding:8px 12px;font-family:var(--mono);}
  .admin-dot{width:7px;height:7px;background:var(--green);border-radius:50%;}
  .logout-btn{width:100%;background:transparent;border:1px solid var(--border2);color:var(--muted2);padding:9px 12px;border-radius:var(--radius-sm);font-size:13px;font-weight:600;cursor:pointer;font-family:var(--font);transition:all .15s;margin-top:8px;}
  .logout-btn:hover{background:var(--red);border-color:var(--red);color:#fff;}
  .main{margin-left:var(--sidebar);flex:1;min-height:100vh;display:flex;flex-direction:column;}
  .topbar{height:60px;border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 28px;gap:16px;background:var(--surface);position:sticky;top:0;z-index:50;}
  .page-title{font-size:18px;font-weight:800;letter-spacing:-0.5px;}
  .content{padding:28px;flex:1;max-width:700px;}
  .settings-group{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:20px;}
  .settings-group-title{padding:16px 20px;border-bottom:1px solid var(--border);font-size:13px;font-weight:700;color:var(--muted2);text-transform:uppercase;letter-spacing:.8px;font-family:var(--mono);}
  .settings-row{display:flex;align-items:center;padding:16px 20px;border-bottom:1px solid var(--border);gap:16px;}
  .settings-row:last-child{border-bottom:none;}
  .settings-row-left{flex:1;}
  .settings-row-name{font-size:14px;font-weight:600;}
  .settings-row-desc{font-size:12px;color:var(--muted2);margin-top:3px;}
  .btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:var(--radius-sm);font-size:12px;font-weight:700;cursor:pointer;border:none;font-family:var(--font);transition:all .15s;text-decoration:none;white-space:nowrap;}
  .btn-ghost{background:transparent;border:1px solid var(--border2);color:var(--muted2);}
  .btn-ghost:hover{background:var(--surface2);color:var(--text);}
  .btn-danger{background:rgba(255,78,106,.1);color:var(--red);border:1px solid rgba(255,78,106,.2);}
  .btn-danger:hover{background:var(--red);color:#fff;}
  .btn-sm{padding:6px 12px;font-size:11px;}
  .info-block{background:rgba(59,122,255,.07);border:1px solid rgba(59,122,255,.15);border-radius:var(--radius-sm);padding:14px 16px;font-size:13px;color:var(--muted2);margin-bottom:20px;line-height:1.6;}
  .info-block strong{color:var(--accent2);}
  code{font-family:var(--mono);font-size:12px;background:var(--surface2);padding:1px 5px;border-radius:4px;color:var(--accent2);}
</style>
</head>
<body>

<div class="sidebar">
  <div class="logo">
    <div class="logo-name"><span>TG</span> Parser Sender</div>
    <div class="logo-sub">Admin Panel</div>
  </div>
  <nav class="nav">
    <a href="/admin" class="nav-item {% if active_tab == 'dashboard' %}active{% endif %}"><span class="nav-icon">◈</span> Дашборд</a>
    <a href="/admin/licenses" class="nav-item {% if active_tab == 'licenses' %}active{% endif %}"><span class="nav-icon">⌗</span> Лицензии</a>
    <a href="/admin/users" class="nav-item {% if active_tab == 'users' %}active{% endif %}"><span class="nav-icon">◉</span> Пользователи</a>
    <a href="/admin/devices" class="nav-item {% if active_tab == 'devices' %}active{% endif %}"><span class="nav-icon">⊟</span> Устройства</a>
    <a href="/admin/transactions" class="nav-item {% if active_tab == 'transactions' %}active{% endif %}"><span class="nav-icon">≋</span> Транзакции</a>
    <a href="/admin/settings" class="nav-item {% if active_tab == 'settings' %}active{% endif %}"><span class="nav-icon">⌘</span> Настройки</a>
  </nav>
  <div class="sidebar-footer">
    <div class="admin-label"><span class="admin-dot"></span>admin online</div>
    <form method="post" action="/admin/logout"><button class="logout-btn">↩ Выйти</button></form>
  </div>
</div>

<div class="main">
  <div class="topbar">
    <span class="page-title">Настройки</span>
  </div>
  <div class="content">

    <div class="info-block">
      <strong>Лимит девайсов не привязан к тарифу.</strong> Ты устанавливаешь его вручную для каждой лицензии на странице <a href="/admin/licenses" style="color:var(--accent2);">Лицензии</a> — стрелками ▲▼ прямо в таблице.
    </div>

    <div class="settings-group">
      <div class="settings-group-title">Данные</div>
      <div class="settings-row">
        <div class="settings-row-left">
          <div class="settings-row-name">Экспорт лицензий</div>
          <div class="settings-row-desc">Скачать все лицензии в формате CSV</div>
        </div>
        <a href="/admin/export" class="btn btn-ghost btn-sm">↓ Скачать CSV</a>
      </div>
    </div>

    <div class="settings-group">
      <div class="settings-group-title">API Endpoints</div>
      <div class="settings-row">
        <div class="settings-row-left">
          <div class="settings-row-name">Обновить лимит девайсов</div>
          <div class="settings-row-desc"><code>POST /admin/api/update-limit</code> — поля: <code>key</code>, <code>max_devices</code></div>
        </div>
      </div>
      <div class="settings-row">
        <div class="settings-row-left">
          <div class="settings-row-name">Установить баланс</div>
          <div class="settings-row-desc"><code>POST /admin/api/set-balance</code> — поля: <code>user_id</code>, <code>balance</code></div>
        </div>
      </div>
      <div class="settings-row">
        <div class="settings-row-left">
          <div class="settings-row-name">Отвязать устройство</div>
          <div class="settings-row-desc"><code>POST /admin/api/unlink-device</code> — поле: <code>device_id</code></div>
        </div>
      </div>
      <div class="settings-row">
        <div class="settings-row-left">
          <div class="settings-row-name">Отвязать все устройства юзера</div>
          <div class="settings-row-desc"><code>POST /admin/api/unlink-devices</code> — поле: <code>user_id</code></div>
        </div>
      </div>
    </div>

    <div class="settings-group">
      <div class="settings-group-title">Сессия</div>
      <div class="settings-row">
        <div class="settings-row-left">
          <div class="settings-row-name">Выйти из панели</div>
          <div class="settings-row-desc">Завершить текущую сессию администратора</div>
        </div>
        <form method="post" action="/admin/logout">
          <button class="btn btn-danger btn-sm" type="submit">↩ Выйти</button>
        </form>
      </div>
    </div>

  </div>
</div>
</body>
</html>
